<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
   #enroll-form table{border : 1px solid white;}
   #enroll-form input , #enroll-form textarea{width:100px; box-sizing:border-box;}
</style>
</head>
<body>

   <%@ include file= "../common/menubar.jsp" %>
   
   <div class="outer">
      <br> <h2 style="text-align:center;">사진게시판 작성하기</h2> <br>
      
      <form action="<%= contextPath %>/insert.th" id="enroll-form" method="post" enctype="multipart/form-data">
         <table align="center">
            <tr>
            <th width="100">제목</th>
            <td colspan="3"><input type="text" name="title" required></td>
            </tr>
            <tr>
               <th>내용</th>
               <td colspan="3">
                  <textarea name="content" style="resize:none;" rows="5" required></textarea>
               </td>
            </tr>
            <tr>
               <th>대표이미지</th>
               <td colspan="3" align="center"> <!-- 미리보기 -->
                  <img id="titleImg" width="250" height="180">
               </td>
            </tr>
            
            <tr>
            	<th>상세이미지</th>
            	<td><img id="contentImg1" width="150" height="120"></td>
            	<td><img id="contentImg2" width="150" height="120"></td>
            	<td><img id="contentImg3" width="150" height="120"></td>
            </tr>
            
         </table>
      	
      	<div id="file-area" style="display:none;">
      		<input type="file" id="file1" name="file1" onchange="loadImg(this, 1);" required>
      		<input type="file" id="file2" name="file2" onchange="loadImg(this, 2);" >
      		<input type="file" id="file3" name="file3" onchange="loadImg(this, 3);" >
      		<input type="file" id="file4" name="file4" onchange="loadImg(this, 4);" >
      	</div>
      	
      	<script>
      		$(function(){
      			$("#titleImg").click(function(){
      				$("#file1").click();
      			});
      			
      			$("[id^=contentImg]").each(function(index, item){
      				$(item).click(function(){
      					
      					$("#file"+(index+2)).click();
      				})
      				
      				
      			})
      			
      			/* $("#contentImg1").click(function(){
      				$("#file2").click();
      			});
      			$("#contentImg2").click(function(){
      				$("#file3").click();
      			});
      			$("#contentImg3").click(function(){
      				$("#file4").click();
      			}); */
      			
      			
      		})
      		
      		function loadImg(inputFile, num){
      			//inputFile : 현재 변화가 생긴 input type="file"요소
      			//num : 몇 번재 input 요소인지 확인 후 해당 영역에 미리보기 하기 위한 변수
      			
      			console.log(inputFile.files.length);
      		/*
      			파일 선택시 length = 1, 파일 선택 취소시 배열안의 내용이 비어있게 됨
      			length 값을 가지고 파일의 존재 유뮤를 알 수가 있다.
      			
      			files속성은 업로드 된 파일의 정보들을 "배열" 형식으로 여러개 묶어서 반환, length그 배열의 크기를 의미
      		*/
      			
      			
      		}
      	
      	</script>
      	
      	
      </form>
   
   </div>











</body>
</html>